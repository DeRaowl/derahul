---
layout: "../../layouts/BlogPost.astro"
title: "How CORS works?"
description: "One of the most common error where frontend developers deal with on regular basis when they are integracting with API."
pubDate: "March 09, 2022"
---

# How CORS work?

<br />{" "}

If you are a web developer, you must have seen the <font color="#a78bfa">**_CORS error_**</font> appear on your screen when you try to call the API, but why does that happen?

<br />
![CORS Error](https://ik.imagekit.io/deraowl/cors-error.png?ik-sdk-version=javascript-1.4.3&updatedAt=1674736113311)

<br />

The browser's <font color="#a78bfa">same-origin policy</font> blocks reading a resource from a different origin
to avoid malicious sites from reading another site's data.

<br />

## So what is the Same-origin policyü§î?

<br />
<small>
  According to <font color="#a78bfa">MDN Docs,</font>{" "}
</small>
The same-origin policy is a critical **security mechanism that restricts** how a
document or script loaded by one origin can interact with a resource from
another origin.

<br />

According to the <font color="#a78bfa">Same Origin Policy,</font> the Same Origin calls are allowed and
Different Origin calls are not allowed.

<br />

For example, if you want to access your API hosted at <font color="#a78bfa">**_https://api.github.com_**</font>
from your client-side frontend application that is hosted at **localhost:3000**,
the browser will not allow this request to complete due to restriction of the
Same-Origin Policy, but <font color="#a78bfa">**_Cross-Origin Resource Sharing (CORS)_**</font> fixes this in
a standard way.

<br />

![CORS](https://ik.imagekit.io/deraowl/cors2.png?ik-sdk-version=javascript-1.4.3&updatedAt=1675572599671)

<br />

## Uhh!! What do you mean by _Origin_?ü§®

<br />

Origin is defined by the <font color="#a78bfa">scheme (protocol), hostname (domain), and port of the
URL</font> used to access it. Two objects have the same origin only when the scheme,
hostname, and port all match.

<br />

Let us understand it better with an example. If you consider the below snippet,
it is <font color="#a78bfa">**considered as same-origin**</font> because they have the same scheme (HTTP) and
hostname (github.com), and the different file path does not matter:{" "}

![same-origin.png](https://ik.imagekit.io/deraowl/cors3.png?ik-sdk-version=javascript-1.4.3&updatedAt=1675572751183)

<br />

Similarly, if you consider the below snippet, These are not of the same origin because
they use <font color="#a78bfa">different schemes</font>

<br />

![image.png](https://ik.imagekit.io/deraowl/cors4.png?ik-sdk-version=javascript-1.4.3&updatedAt=1675572751210)

<br />

## How does CORS work ü§î?

<br />

Cross-Origin Resource Sharing (CORS) is an HTTP-header-based mechanism that allows
a server to indicate any origins (domain, scheme, or port) other than its own from
which a browser should permit loading resources.

<br />
## How it is achieved?

<br />

- When the browser is making a cross-origin request, the <font color="#a78bfa">**browser adds an Origin
  header**</font> with the current origin. - On the server-side, when a server sees this header
  and wants to allow access.

<br />

It needs to **add an Access-Control-Allow-Origin header to the response **specifying
the requesting origin (or \* to allow any origin.) - When the browser sees this response
with an appropriate<font color="#a78bfa"> **Access-Control-Allow-Origin header**,</font> the **browser allows
the response data** to be shared with the client site.

<br />

![image.png](https://ik.imagekit.io/deraowl/cors6.png?ik-sdk-version=javascript-1.4.3&updatedAt=1675572751260)

<br />

## What about Preflight requests in CORS?‚úà

<br />

**According to MDN Docs**, A CORS preflight request is a CORS request that checks
to see if the CORS protocol is understood and a server is aware of using specific
methods and headers.

<br />

If a web app needs a complex HTTP request,<font color="#a78bfa">**the browser adds a preflight request
to the front of the request chain.**</font> Browsers create a preflight request if it is
needed. It's an <font color="#a78bfa">**OPTIONS request**</font> like below and is sent before the actual request
message.

<br />

```
OPTIONS /users HTTP/1.1 Origin: localhost:3000 Access-Control-Request-Method: DELETE
```

<br />

On the server-side, <font color="#a78bfa">**an application needs to respond**</font> to the preflight request
with information about the methods the application accepts from this origin.

<br />

```
HTTP/1.1 200 OK Access-Control-Allow-Origin: localhost:3000 Access-Control-Allow-Methods:
GET, DELETE, HEAD, OPTIONS
```

<br />

To know more about CORS, please visit [MDN](https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS#preflighted_requests) and [web.dev](https://web.dev/cross-origin-resource-sharing/).

I strongly recommend
joining through official docs.

<br /> {""}I write about the web; you can follow me on[Twitter](https://twitter.com/DeRaowl).
If you liked the post, give some ‚ù§Ô∏è!! Cheers
